"use strict";!function(){function i(e){var t=e.find(".products-menu__item"),e=e.find(".products-menu__content");t.removeClass("active"),e.width(0)}function a(e){var t,n,i,a,o=e.find(".products-menu__content"),r=e.find(".products-menu__content-main"),c=(t=e,n=0,c=$(window).width(),i=(i=t.closest(".products-menu").find(".products-menu__title")).width()*i.length,t=t.find(".products-menu__content-main"),a=parseInt(t.css("padding-left")),t=parseInt(t.css("padding-right")),{container:n=window.matchMedia("(max-width: 850px)").matches?c-i:524,content:n-a-t});e.addClass("active"),o.width(c.container),r.width(c.content)}$(".products-menu__title").on("click",function(e){e.preventDefault();var e=$(e.currentTarget).closest(".products-menu__item"),t=e.hasClass("active"),n=e.closest(".products-menu");t?i(n):(i(n),a(e))})}(),function(){var i;ymaps.ready(function(){i=new ymaps.Map("map",{center:[55.752004,37.576133],zoom:16,controls:[]});for(var e=[[55.752004,37.576133]],t=new ymaps.GeoObjectCollection({},{draggable:!1,iconLayout:"default#image",iconImageHref:"./img/icons/geo.svg",iconImageSize:[58,73],iconImageOffset:[-35,-52]}),n=0;n<e.length;n++)t.add(new ymaps.Placemark(e[n]));i.geoObjects.add(t),i.behaviors.disable("scrollZoom")})}(),$(".form").submit(function(e){e.preventDefault();var e=$(e.currentTarget),t=e.find("[name='name']"),n=e.find("[name='phone']"),i=e.find("[name='comment']"),a=e.find("[name='to']"),o=$("#modal"),r=o.find(".modal__content");o.removeClass("error-modal"),e=e,[t,n,i,a].forEach(function(e){e.removeClass("input-error"),""===e.val().trim()&&e.addClass("input-error")}),0===e.find(".input-error").length&&((e=$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:t.val(),phone:n.val(),comment:i.val(),to:a.val()},error:function(e){}})).done(function(e){r.text(e.message),$(".form").trigger("reset")}),e.fail(function(e){e=e.responseJSON.message;r.text(e),o.addClass("error-modal")}),e.always(function(){$.fancybox.open({src:"#modal",type:"inline"})}))}),$(".app-close-modal").click(function(e){e.preventDefault(),$.fancybox.close()}),function(){function i(e){var t;s||(s=!0,t=l(e),d(e),n.css({transform:"translateY(".concat(t,"%)")}),u(o,e,"active"),setTimeout(function(){s=!1,u(c,e,"fixed-menu__item--active")},1300))}function a(){var e=o.filter(".active"),t=e.next(),n=e.prev();return{next:function(){t.length&&i(t.index())},prev:function(){n.length&&i(n.index())}}}var o=$("section"),n=$(".maincontent"),r=$(".fixed-menu"),c=r.find(".fixed-menu__item"),e=new MobileDetect(window.navigator.userAgent).mobile(),s=!1,l=(o.first().addClass("active"),function(e){e*=-100;return isNaN(e)?(console.error("передано не верное значение в  countSectionPosition"),0):e}),d=function(e){var t="fixed-menu--shadowed";"black"===o.eq(e).attr("data-sidemenu-theme")?r.addClass(t):r.removeClass(t)},u=function(e,t,n){e.eq(t).addClass(n).siblings().removeClass(n)};$(window).on("wheel",function(e){var e=e.originalEvent.deltaY,t=a();0<e&&t.next(),e<0&&t.prev()}),$(window).on("keydown",function(e){var t=e.target.tagName.toLowerCase(),t="input"===t||"textarea"===t,n=a();if(!t)switch(e.keyCode){case 38:n.prev();break;case 40:n.next()}}),$(".wrapper").on("touchmove",function(e){return e.preventDefault()}),$("[data-scroll-to]").click(function(e){e.preventDefault();e=$(e.currentTarget).attr("data-scroll-to"),e=$("[data-section-id=".concat(e,"]"));i(e.index())}),e&&$("body").swipe({swipe:function(e,t){a()["down"===t?"prev":"up"===t?"next":""]()}})}(),function(){var e,t,n=document.querySelector(".video__player-img"),i=document.getElementById("player"),a=document.querySelector(".duration__img"),o=document.getElementById("durationLevel"),r=document.getElementById("micLevel"),c=document.getElementById("soundBtn"),s=document.getElementById("dynamic");function l(){n.classList.toggle("video__player-img--active"),a.classList.toggle("duration__img-pause"),i.paused?(i.play(),e=setInterval(u,1e3/60)):(clearInterval(e),i.pause())}function d(){i.currentTime=o.value,u()}function u(){o.value=i.currentTime;var e=i.duration/100,e=i.currentTime/e;o.style.background="linear-gradient(90deg, #FEDB3F 0%, #FEDB3F ".concat(e,"%, #626262 ").concat(e,"%)")}function m(){i.volume=r.value/10,0===i.volume?c.classList.add("active"):c.classList.remove("active")}function v(){0===i.volume?(i.volume=t,r.value=10*t,c.classList.remove("active")):(t=i.volume,i.volume=0,r.value=0,c.classList.add("active"))}window.addEventListener("load",function(){i.addEventListener("click",l);for(var e=document.querySelectorAll(".play"),t=0;t<e.length;t++)e[t].addEventListener("click",l);o.min=0,o.value=0,o.max=i.duration,o.addEventListener("input",d),r.min=0,r.max=10,r.value=r.max,r.addEventListener("input",m),s.addEventListener("click",v)}),i.addEventListener("ended",function(){n.classList.toggle("video__player-img--active"),a.classList.remove("duration__img-pause"),i.currentTime=0})}(),$(".reviews__switcher-link").click(function(e){e.preventDefault();var n,e=$(e.currentTarget),t=e.attr("data-select"),t=(n=t,$(".reviews__item").filter(function(e,t){return $(t).attr("data-selected")===n})),e=e.closest(".reviews__switcher-item");t.addClass("reviews__item--active").siblings().removeClass("reviews__item--active"),e.addClass("reviews__switcher-item--active").siblings().removeClass("reviews__switcher-item--active")}),function(){var e=document.querySelector(".burger"),t=document.querySelector(".overlay"),n=document.querySelector("body");function i(){e.classList.toggle("burger--active"),t.classList.toggle("overlay--active"),n.classList.toggle("body--active-menu")}document.querySelectorAll(".overlay .menu__link").forEach(function(e){e.addEventListener("click",i)}),e.addEventListener("click",i)}(),$(document).ready(function(){var t=$(".slider__list").bxSlider({pager:!1,controls:!1});$(".products__arrow--prev").click(function(e){e.preventDefault(),t.goToPrevSlide()}),$(".products__arrow--next").click(function(e){e.preventDefault(),t.goToNextSlide()})}),function(){function o(e){var t=(e=e.closest(".team__item")).find(".team__content"),n=t.find(".team__content-block").height();e.addClass("team__item--active"),t.height(n)}function n(e){var t=e.find(".team__content");e.find(".team__item").removeClass("team__item--active"),t.height(0)}$(".team__title").click(function(e){var e=$(e.currentTarget),t=e.closest(".team");e.closest(".team__item").hasClass("team__item--active")?n(t):(n(t),o(e))}),$(".team__title").on("click",function(e){var e=$(e.currentTarget),t=e.closest(".team"),n=e.closest(".team__item"),i=e.find(".team__title-svg-path"),a=t.find(".team__title-svg-path");n.hasClass("team__item-active")?(closeItem(t),i.attr("xlink:href","./img/icons/sprite.svg#team-triangle")):(closeItem(t),o(e),a.attr("xlink:href","./img/icons/sprite.svg#team-triangle"),i.attr("xlink:href","./img/icons/sprite.svg#triangle-up"))})}();